services:
  bible-bot:
    build: .
    container_name: telegram-bible-bot
    restart: unless-stopped
    # env_file is optional - if .env exists, it will be used
    # Otherwise, use the default token in environment section below
    volumes:
      # Persist user subscriptions
      - ./subscribed_users.json:/app/subscribed_users.json
      # Persist quiz scores and sessions
      - ./quiz_scores.json:/app/quiz_scores.json
      - ./active_quizzes.json:/app/active_quizzes.json
      # Persist reading progress
      - ./reading_progress.json:/app/reading_progress.json
      # Persist daily quiz data
      - ./daily_quiz.json:/app/daily_quiz.json
      # Persist achievements
      - ./achievements.json:/app/achievements.json
      # Persist reminders
      - ./reminders.json:/app/reminders.json
    environment:
      - TZ=GMT
      # Bot token can be set here or in .env file
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN:-8410859508:AAEVHpQlqkPDSglcCz16xrlhtx-wOIdlZOE}
    # Health check
    healthcheck:
      test: ["CMD", "python3", "-c", "import sys; sys.exit(0)"]
      interval: 1h
      timeout: 10s
      retries: 3

